env: flex
runtime: gs://elixir-runtime/elixir-2019-10-29-183530.yaml
runtime_config:
  release_app: volunteer
  packages:
    - rustc
  build:
    - 'cd assets && npm config set "@fortawesome:registry" https://npm.fontawesome.com/ && npm config set "//npm.fontawesome.com/:_authToken" C71E546A-A6A4-45BD-9B9D-16967DAADB02 && NODE_ENV=development npm install && npm run production && cd .. && mix phx.digest'
    - 'cd priv/commands && NODE_ENV=production npm install'

skip_files:
  - ".git"
  - "infra"
  - "assets/node_modules"
  - "priv/commands/node_modules"
  - "priv/static"
  - "test"

env_variables:
  CANNY_PRIVATE_KEY: "037d614a-ef3c-bca5-e4c3-15f782948fa6"
  DB_GCLOUD_ID: "prod-ismailivolunteer"
  DB_HOST: "/cloudsql/ismailivolunteer-201223:northamerica-northeast1:prod-ismailivolunteer/.s.PGSQL.5432"
  DB_NAME: "postgres"
  DB_PASSWORD: "PsHF7jZ7kTMUPumkCu4eanghTFykngwxhHX34vJg7GSA9PPcpCMvxdFnzqpR6CWB"
  DB_USERNAME: "postgres"
  ENDPOINT_URL_CHECK_ORIGIN: "//ots.the.ismaili,//ismailivolunteer-201223.appspot.com"
  ENDPOINT_URL_HOST: "ots.the.ismaili"
  FILESTACK_API_KEY: "ASAocDcQxSfWTXPWMVkvoz"
  FILESTACK_APP_SECRET: "MZWPJWBJRJDU5DHO3HRXXNW6WI"
  FONT_AWESOME_AUTH_TOKEN: "C71E546A-A6A4-45BD-9B9D-16967DAADB02"
  GCLOUD_TARGET_HOST: "prod-daae7e02-dot-ismailivolunteer-201223.appspot.com"
  GCLOUD_VERSION: "prod-daae7e02"
  GIT_SHA: "daae7e02e302c55fb42d1a6b3177d1a32de0b05b"
  GIT_SHA_SHORT: "daae7e02"
  MAILER_API_KEY: "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"
  MAILER_WRAPPED_ADAPTER: "send_grid"
  MICROSOFT_OAUTH_CLIENT_ID: "a7f3bc45-6306-4247-aae6-30dfb41843fd"
  MICROSOFT_OAUTH_CLIENT_SECRET: "trrrqwJPYP193($eKBN16_?"
  NODE_ENV: "production"
  RECAPTCHA_PUBLIC_KEY: "6LfwojoUAAAAAJrvY69kP9MJCSvyvg-DakXkxh7X"
  RECAPTCHA_SECRET: "6LfwojoUAAAAAGtCbEeRBCmXNdgKZwhzx9MYc8ep"
  SENTRY_DSN: "https://59d22c5854c244fe93ff7426819a0533:076628cc1c4d4f5d95512a432982fff8@sentry.io/253593"
  SENTRY_ENVIRONMENT_NAME: "prod"

beta_settings:
  cloud_sql_instances: "ismailivolunteer-201223:northamerica-northeast1:prod-ismailivolunteer"

automatic_scaling:
  min_num_instances: 1
  max_num_instances: 1
  cpu_utilization:
    target_utilization: 0.6
